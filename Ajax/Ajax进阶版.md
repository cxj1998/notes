## 一、XMLHttpRequest Level2的新特性

### 	1.XMLHttpRequest Level2的新功能

1. 可以设置 HTTP 请求的时限
2. 可以使用FormData对象管理表单数据
3. 可以上传文件
4. 可以获得数据传输的进度信息

### 	2.设置 HTTP请求时限

```
xhr.timeout = 3000
```

------

```
xhr.ontimeout = function(event){
    alert('请求超时！')
}
```



### 	3.FormData 对象管理表单数据

​	![1657295727251](E:\笔记\Ajax\assets\1657295727251.png)

------

​	获取网页表单的值

![1657296373579](E:\笔记\Ajax\assets\1657296373579.png)

### 	4.上传文件

##### 		定义UI结构

![1657296988077](E:\笔记\Ajax\assets\1657296988077.png)

##### 		验证是否选择了文件

![1657297038435](E:\笔记\Ajax\assets\1657297038435.png)

#### 		向FormData中追加文件

![1657297518984](E:\笔记\Ajax\assets\1657297518984.png)

#### 		使用xhr发起上传文件的请求

![1657297651291](E:\笔记\Ajax\assets\1657297651291.png)

#### 		监听onreadystatechange事件

![1657297779980](E:\笔记\Ajax\assets\1657297779980.png)

### 	5.显示文件上传进度

​	通过监听 **xhr.upload.onprogress**事件，来获取文件的上传进度

##### 	监听上传事件

![1657332023071](E:\笔记\Ajax\assets\1657332023071.png)

------

##### 	监听上传进度的事件

![1657334724798](E:\笔记\Ajax\assets\1657334724798.png)

##### 	监听上传完成的事件

​	**onload**事件是在src的资源**加载完毕**的时候,才会触发”

![1657335160301](E:\笔记\Ajax\assets\1657335160301.png)

## 二、axios

​	**Axios**是专注于 **网络数据请求**的 库

### 	1.axios发起GET请求

```
axios.get('url',{params:{/*参数*/}}).then(callback)
```

![1657335793922](E:\笔记\Ajax\assets\1657335793922.png)

### 	2.axios发起POST请求

```
axios.post('url',{/*参数*/}).then(callback)
```

![1657336287372](E:\笔记\Ajax\assets\1657336287372.png)

### 	3.直接使用axios发起请求

```
axios({
    method:'请求类型',
    url:'请求的url地址',
    data:{/*post数据*/},
    params:{/*get参数*/}
}).then(callback)
```

#### 	①直接使用axios发起GET请求

![1657336751008](E:\笔记\Ajax\assets\1657336751008.png)

#### 	②直接使用axios发起POST请求

![1657337083525](E:\笔记\Ajax\assets\1657337083525.png)

## 三、同源和跨域

​	**同源**指两个URL的协议、域名、端口一致，反之，，则是**跨域**

### 	1.如何实现跨域数据请求

​	解决方案： **JSONP** 和 **CORS**

​	**JSONP：**兼容低版本IE。缺点是只支持GET请求，不支持POST请求

​	**CORS：**不兼容低版本IE。支持GET和POST请求

## 四、防抖

​	**防抖策略**是当事件被触发后，**延迟 n 秒**后再**执行回调**，如果在这**n秒内事件**又**被触发**，则**重新计时**。

![1657353947173](E:\笔记\Ajax\assets\1657353947173.png)

## 五、节流

​	**节流策略**，可以**减少一段时间**内事件的**触发频率**

![1657355993947](E:\笔记\Ajax\assets\1657355993947.png)

### 	节流阀的概念

​	节流阀为空，表示可以执行下次操作，反之，则不能执行下次操作

​	每次执行操作前，必须**先判断节流阀是否为空**

​	